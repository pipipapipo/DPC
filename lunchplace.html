<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Lunch Wheel ‚Äî Pastel RNG</title>
<style>
  :root{
    --bg:#0f172a; --text:#e5e7eb; --muted:#94a3b8;
    --card:#0b1020; --ring:#ffffff22; --btn:#1f2937;
  }
  *{box-sizing:border-box}
  html,body{height:100%}
  body{
    margin:0; font-family: system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,Cantarell,Arial;
    color:var(--text);
    background: radial-gradient(1600px 900px at 20% -10%, #18243b 0%, #0b1220 55%, #070b14 100%), var(--bg);
    display:flex; align-items:center; justify-content:center; padding:18px;
  }

  .wrap{ width:min(960px,100%); display:grid; gap:14px }
  .controls{
    display:flex; gap:10px; align-items:center; justify-content:center; flex-wrap:wrap;
  }
  .btn{
    appearance:none; border:1px solid var(--ring); background:#0e1526; color:var(--text);
    padding:12px 16px; border-radius:12px; cursor:pointer; font-weight:700;
    transition:transform .06s ease, border-color .2s ease, background .2s ease;
    text-decoration:none; display:inline-block;
  }
  .btn.primary{ background: #14b8a6; color:#041016; border-color: transparent; }
  .btn:active{ transform: translateY(1px) }
  .hint{ color:var(--muted); font-size:13px; text-align:center }

  .stage{
    background: linear-gradient(180deg,#0c1424,#0a1020);
    border:1px solid var(--ring); border-radius:18px; padding:20px;
    display:grid; place-items:center; gap:8px;
  }

  /* Wheel */
  .wheel-wrap{ position:relative; display:grid; place-items:center; }
  canvas{ width:min(92vw,520px); height:min(92vw,520px); max-width:520px; max-height:520px; display:block }
  .pointer{
    position:absolute; top:-6px; width:0; height:0; filter:drop-shadow(0 3px 3px rgba(0,0,0,.35));
    border-left:12px solid transparent; border-right:12px solid transparent; border-bottom:22px solid #fde68a;
  }
  .result{ text-align:center; }
  .result h2{ margin:.3rem 0 .1rem; font-size:clamp(20px,3vw,26px) }
  .result .muted{ color:var(--muted) }

  /* Modal */
  .modal{
    position:fixed; inset:0; display:none; place-items:center; z-index:50;
    background:rgba(2,6,23,.65); backdrop-filter: blur(6px);
  }
  .modal.open{ display:grid; }
  .sheet{
    width:min(720px,92vw); background:#0b1220; border:1px solid var(--ring);
    border-radius:14px; padding:16px; box-shadow:0 20px 50px rgba(0,0,0,.45); 
  }
  .sheet h3{ margin:.2rem 0 .4rem }
  .rows{ display:grid; gap:10px; max-height:50vh; overflow:auto; padding-right:4px; }
  .row{
    display:grid; grid-template-columns: 1fr 110px auto; gap:10px; align-items:center;
    background:#0d1629; border:1px solid var(--ring); border-radius:12px; padding:8px;
  }
  .row input{
    width:100%; padding:10px 12px; border-radius:10px; outline:none;
    border:1px solid #ffffff12; background:#0b1324; color:var(--text);
  }
  .row .del{
    background:#2a0e10; color:#fecaca; border:1px solid #ef444455; border-radius:10px; cursor:pointer;
    padding:8px 10px;
  }
  .sheet .actions{ display:flex; justify-content:space-between; gap:8px; margin-top:12px }
  .ghost{ color:var(--muted); text-align:center; padding:8px 0 }
</style>
</head>
<body>
  <main class="wrap">
    <section class="stage">
      <div class="controls">
        <button id="spinBtn" class="btn primary">üé≤ Spin</button>
        <button id="editBtn" class="btn">Edit places</button>
        <a href="index.html" class="btn">‚Üê Return to Menu</a>
      </div>

      <div class="wheel-wrap">
        <div class="pointer" aria-hidden="true"></div>
        <canvas id="wheel" width="1040" height="1040" aria-label="Lunch spinner"></canvas>
      </div>

      <div class="result" id="result" style="display:none">
        <div class="muted">Result</div>
        <h2 id="winnerText">‚Äî</h2>
        <div class="hint" id="countHint"></div>
      </div>

      <p class="hint">Weighted, pastel wheel ‚Ä¢ Lists saved locally</p>
    </section>
  </main>

  <!-- Modal: Manage places -->
  <div id="modal" class="modal" aria-hidden="true">
    <div class="sheet" role="dialog" aria-modal="true" aria-labelledby="modalTitle">
      <h3 id="modalTitle">Edit Lunch Places</h3>
      <div class="rows" id="rows"></div>
      <div class="ghost" id="emptyGhost" style="display:none">No places yet ‚Äî add some below.</div>
      <div class="actions">
        <div style="display:flex; gap:8px">
